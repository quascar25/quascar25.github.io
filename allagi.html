<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALLAGI - Слово на сфере</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: #000;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1200px;
        }

        /* Звёздный фон */
        #stars {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
        }

        /* 3D-сцена */
        .scene {
            position: relative;
            width: 400px; height: 400px;
            transform-style: preserve-3d;
            animation: rotateScene 30s infinite linear;
        }
        @keyframes rotateScene {
            0% { transform: rotateY(0deg) rotateX(15deg); }
            100% { transform: rotateY(360deg) rotateX(15deg); }
        }

        /* Контейнер сферы */
        .sphere {
            position: relative;
            width: 100%; height: 100%;
            transform-style: preserve-3d;
        }

        /* Буква как 3D-объект */
        .letter-3d {
            position: absolute;
            top: 50%; left: 50%;
            color: #aaa;
            font-size: 32px;
            font-weight: bold;
            transform-style: preserve-3d;
            transition: color 0.3s;
            user-select: none;
            /* Центрируем исходную точку трансформации */
            transform-origin: 0 0;
        }
        .letter-3d:hover { cursor: pointer; color: #ddd; }
        .letter-3d.active { color: #fff; text-shadow: 0 0 10px white; }
    </style>
</head>
<body>
    <canvas id="stars"></canvas>
    <div class="scene">
        <div class="sphere" id="sphere"></div>
    </div>

    <script>
        // ========== 1. ЗВЁЗДНОЕ НЕБО ==========
        const canvas = document.getElementById('stars');
        const ctx = canvas.getContext('2d');
        let stars = [];
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        function initStars() {
            stars = [];
            for (let i = 0; i < 300; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    r: Math.random() * 1.5,
                    speed: Math.random() * 0.3 + 0.1,
                    opacity: Math.random() * 0.5 + 0.3
                });
            }
        }
        function drawStars() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let s of stars) {
                ctx.globalAlpha = s.opacity;
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
                ctx.fill();
                s.x -= s.speed;
                if (s.x < 0) { s.x = canvas.width; s.y = Math.random() * canvas.height; }
                // Мерцание
                s.opacity += (Math.random() - 0.5) * 0.02;
                s.opacity = Math.max(0.2, Math.min(0.8, s.opacity));
            }
            requestAnimationFrame(drawStars);
        }
        resizeCanvas(); initStars(); drawStars();
        window.addEventListener('resize', () => { resizeCanvas(); initStars(); });

        // ========== 2. РАЗМЕЩЕНИЕ БУКВ СЛОВА "ПОЛЬЗА" НА СФЕРЕ ==========
        const sphere = document.getElementById('sphere');
        const word = "ПОЛЬЗА";
        const letters = word.split('');
        const radius = 150; // Радиус сферы
        const totalLetters = letters.length;

        // Параметры дуги: на какой части сферы разместить слово
        const arcAngle = Math.PI * 0.7; // Длина дуги в радианах (~126 градусов)
        const startAngle = -arcAngle / 2; // Начинаем с отрицательного угла, чтобы центрировать слово

        // Создаём и размещаем каждую букву
        letters.forEach((letter, index) => {
            const letterElem = document.createElement('div');
            letterElem.className = 'letter-3d';
            letterElem.textContent = letter;

            // 1. Рассчитываем угол для текущей буквы вдоль дуги
            const angle = startAngle + (index / (totalLetters - 1)) * arcAngle;

            // 2. Координаты на плоскости дуги (X, Z) - это окружность в горизонтальной плоскости
            const x = radius * Math.sin(angle);
            const z = radius * Math.cos(angle);

            // 3. Добавляем небольшое смещение по Y, чтобы слово было не на экваторе, а чуть выше/ниже
            const y = -30; // Поднимаем слово немного выше центра сферы

            // 4. Поворачиваем саму букву так, чтобы она была "касательной" к сфере
            //    Грубо говоря, поворачиваем её на тот же угол, под которым она стоит
            const letterRotationY = -angle * (180 / Math.PI); // Конвертируем радианы в градусы

            // 5. Применяем все трансформации
            letterElem.style.transform = `
                translate(-50%, -50%)           /* Центрируем исходную точку */
                translate3d(${x}px, ${y}px, ${z}px) /* Ставим в 3D-пространство */
                rotateY(${letterRotationY}deg)      /* Поворачиваем букву по Y */
            `;

            // Клик для смены цвета
            letterElem.addEventListener('click', function() {
                this.classList.toggle('active');
            });

            sphere.appendChild(letterElem);
        });
    </script>
</body>
</html>
