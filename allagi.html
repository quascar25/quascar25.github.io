<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALLAGI - Сфера Слов</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #000;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1200px;
        }

        /* Звёздный фон (Canvas) */
        #starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* Контейнер 3D-сцены */
        .scene {
            position: relative;
            width: 320px;
            height: 320px;
            transform-style: preserve-3d;
            animation: rotateSphere 40s infinite linear;
        }

        /* Анимация плавного вращения всей сцены */
        @keyframes rotateSphere {
            0% { transform: rotateY(0deg) rotateX(10deg); }
            100% { transform: rotateY(360deg) rotateX(10deg); }
        }

        /* Контейнер сферы */
        .sphere {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
        }

        /* Стиль для каждого слова-контейнера */
        .word-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform-style: preserve-3d;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Стиль для каждой буквы внутри слова */
        .letter {
            color: #888;
            font-size: 22px;
            font-weight: bold;
            text-transform: uppercase;
            display: inline-block;
            transition: color 0.3s ease, text-shadow 0.3s ease;
            position: relative;
        }

        /* Эффект при наведении на букву */
        .letter:hover {
            cursor: pointer;
            color: #ccc;
        }

        /* Стиль для активной (нажатой) буквы */
        .letter.active {
            color: #fff;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.7);
        }
    </style>
</head>
<body>
    <!-- Холст для звёздного неба -->
    <canvas id="starfield"></canvas>

    <!-- 3D-сцена -->
    <div class="scene">
        <div class="sphere" id="sphereContainer">
            <!-- Слова будут сгенерированы здесь скриптом -->
        </div>
    </div>

    <script>
        // ========== 1. ГЕНЕРАЦИЯ ЗВЁЗДНОГО ПОЛЯ ==========
        const canvas = document.getElementById('starfield');
        const ctx = canvas.getContext('2d');
        let stars = [];
        let animationId;

        function initCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        function createStars() {
            const starCount = 400;
            stars = [];
            for (let i = 0; i < starCount; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    r: Math.random() * 1.5,
                    speed: Math.random() * 0.5,
                    opacity: Math.random() * 0.7 + 0.3
                });
            }
        }

        function drawStars() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let star of stars) {
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.r, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(255, 255, 255, ${star.opacity})`;
                ctx.fill();

                // Движение и мерцание
                star.x -= star.speed;
                star.opacity += (Math.random() - 0.5) * 0.05;
                star.opacity = Math.max(0.3, Math.min(1, star.opacity));

                if (star.x < 0) {
                    star.x = canvas.width;
                    star.y = Math.random() * canvas.height;
                }
            }
            animationId = requestAnimationFrame(drawStars);
        }

        // Запуск звёздного неба
        initCanvas();
        createStars();
        drawStars();
        window.addEventListener('resize', () => {
            cancelAnimationFrame(animationId);
            initCanvas();
            createStars();
            drawStars();
        });

        // ========== 2. СОЗДАНИЕ 3D-СФЕРЫ ИЗ СЛОВ ==========
        const sphereContainer = document.getElementById('sphereContainer');
        const words = [
            "ВОЛЯ", "ДОСТУП", "СИЛА", "ЗНАНИЕ", "РАВЕНСТВО",
            "СВОБОДА", "БУДУЩЕЕ", "ЕДИНСТВО", "ДЕЙСТВИЕ", "АЛЬТРУИЗМ"
        ];
        const sphereRadius = 140; // Радиус сферы в пикселях
        const totalWords = words.length;

        // Функция для размещения слова на сфере
        function placeWordOnSphere(word, index) {
            // 1. Создаем контейнер для слова
            const wordDiv = document.createElement('div');
            wordDiv.className = 'word-container';

            // 2. Рассчитываем позицию контейнера на сфере (золотое сечение)
            const phi = Math.acos(-1 + (2 * index) / totalWords);
            const theta = Math.sqrt(totalWords * Math.PI) * phi;

            // 3. Конвертируем сферические координаты в 3D (x, y, z)
            const posX = sphereRadius * Math.sin(phi) * Math.cos(theta);
            const posY = sphereRadius * Math.sin(phi) * Math.sin(theta);
            const posZ = sphereRadius * Math.cos(phi);

            // 4. Позиционируем контейнер слова в 3D-пространстве
            wordDiv.style.transform = `
                translate(-50%, -50%)
                translate3d(${posX}px, ${posY}px, ${posZ}px)
                rotateY(${theta}rad)
            `;

            // 5. Разбиваем слово на буквы и создаём для каждой свой элемент
            const letters = word.split('');
            letters.forEach((letter, letterIndex) => {
                const letterSpan = document.createElement('span');
                letterSpan.className = 'letter';
                letterSpan.textContent = letter;

                // Ключевой момент: размещаем каждую букву вдоль дуги.
                // Смещение по оси X внутри контейнера создаёт эффект "выгнутости" слова.
                const offset = (letterIndex - (letters.length - 1) / 2) * 15; // 15px - интервал между буквами
                letterSpan.style.transform = `translateX(${offset}px)`;

                // Добавляем обработчик клика для смены цвета
                letterSpan.addEventListener('click', function() {
                    this.classList.toggle('active');
                });

                wordDiv.appendChild(letterSpan);
            });

            sphereContainer.appendChild(wordDiv);
        }

        // 6. Размещаем все слова на сфере
        words.forEach((word, index) => {
            placeWordOnSphere(word, index);
        });

    </script>
</body>
</html>
