<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ê–Ω–æ–Ω–∏–º–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0a0a2a 0%, #1a1a3a 100%);
            color: #e0e0ff;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 500px;
            background: rgba(20, 20, 40, 0.85);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 10, 30, 0.7);
            border: 1px solid #3a3a6a;
            text-align: center;
        }

        h1 {
            color: #6ee7ff;
            margin-bottom: 15px;
            font-size: 2.2rem;
            text-shadow: 0 0 10px rgba(110, 231, 255, 0.5);
        }

        .warning {
            background: rgba(255, 100, 100, 0.15);
            border: 1px solid #ff6464;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .code-display {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid #4a4a8a;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.4rem;
            letter-spacing: 2px;
            word-break: break-all;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #a0e0ff;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .digit-input {
            width: 100%;
            aspect-ratio: 1;
            text-align: center;
            font-size: 1.8rem;
            font-family: 'Courier New', monospace;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #5a5a9a;
            border-radius: 6px;
            color: #ffffff;
            outline: none;
        }

        .digit-input.blink {
            animation: blink 1s infinite;
            border-color: #6ee7ff;
            background: rgba(110, 231, 255, 0.1);
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .button {
            background: linear-gradient(to bottom, #2a2a5a, #1a1a3a);
            color: #c0d0ff;
            border: 1px solid #5a5a9a;
            border-radius: 8px;
            padding: 16px 30px;
            margin: 10px 0;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
        }

        .button:hover:not(:disabled) {
            background: linear-gradient(to bottom, #3a3a6a, #2a2a5a);
            border-color: #6ee7ff;
            color: #ffffff;
            transform: translateY(-2px);
        }

        .button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .status {
            margin-top: 20px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .success {
            color: #6eff8f;
            font-size: 3rem;
        }

        .instruction {
            color: #a0b0ff;
            margin: 15px 0;
            line-height: 1.5;
            font-size: 0.95rem;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 500px) {
            .container {
                padding: 15px;
            }
            h1 {
                font-size: 1.8rem;
            }
            .code-display {
                font-size: 1.1rem;
                padding: 15px;
            }
            .digit-input {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåÄ –ê–Ω–æ–Ω–∏–º–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h1>
        
        <div class="warning">
            ‚ö†Ô∏è <strong>–ö–æ–¥ ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–ª—é—á.</strong><br>
            –ï–≥–æ –ø–æ—Ç–µ—Ä—è –Ω–µ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º–∞. –í—ã –Ω–µ—Å–µ—Ç–µ –∑–∞ –Ω–µ–≥–æ –ø–æ–ª–Ω—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.
        </div>

        <!-- –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–¥–∞ -->
        <div id="step1">
            <div class="instruction">
                –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥. –¢—â–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–ø–∏—à–∏—Ç–µ –µ–≥–æ –Ω–∞ –±—É–º–∞–≥—É.
            </div>
            <button id="generateBtn" class="button">–°–û–ó–î–ê–¢–¨ –ö–û–î</button>
        </div>

        <!-- –®–∞–≥ 2: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–¥–∞ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ -->
        <div id="step2" class="hidden">
            <div class="instruction">
                –í–∞—à –∫–æ–¥ (–ø–µ—Ä–µ–ø–∏—à–∏—Ç–µ –µ–≥–æ –Ω–∞ –±—É–º–∞–≥—É —Å–µ–π—á–∞—Å):
            </div>
            <div id="codeDisplay" class="code-display"></div>
            <button id="copiedBtn" class="button">–í–´–ü–ò–°–ê–õ –ù–ê –ë–£–ú–ê–ì–£</button>
        </div>

        <!-- –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–∏—Å–∏ –ø–æ –º–∏–≥–∞—é—â–∏–º –ø–æ–∑–∏—Ü–∏—è–º -->
        <div id="step3" class="hidden">
            <div class="instruction">
                –í–≤–µ–¥–∏—Ç–µ —Ü–∏—Ñ—Ä—ã —Å –≤–∞—à–µ–π –±—É–º–∞–≥–∏ <strong>—Ç–æ–ª—å–∫–æ –≤ –º–∏–≥–∞—é—â–∏–µ –ø–æ–ª—è</strong> (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º–∏).
            </div>
            
            <div id="inputContainer" class="input-grid">
                <!-- 50 –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
            </div>
            
            <div class="instruction" id="hintText"></div>
            <button id="verifyBtn" class="button" disabled>–ü–†–û–í–ï–†–ò–¢–¨ –í–í–û–î</button>
        </div>

        <!-- –®–∞–≥ 4: –†–µ–∑—É–ª—å—Ç–∞—Ç -->
        <div id="step4" class="hidden">
            <div class="status" id="statusMessage"></div>
            <button id="restartBtn" class="button">–ù–ê–ß–ê–¢–¨ –ù–û–í–£–Æ –†–ï–ì–ò–°–¢–†–ê–¶–ò–Æ</button>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const CODE_LENGTH = 50;
        const CHECK_DIGITS = 10; // —Å–∫–æ–ª—å–∫–æ –ø–æ–∑–∏—Ü–∏–π –ø—Ä–æ–≤–µ—Ä—è–µ–º

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ
        let currentCode = '';
        let positionsToCheck = [];
        let userInputs = [];

        // –≠–ª–µ–º–µ–Ω—Ç—ã
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const step3 = document.getElementById('step3');
        const step4 = document.getElementById('step4');
        const generateBtn = document.getElementById('generateBtn');
        const codeDisplay = document.getElementById('codeDisplay');
        const copiedBtn = document.getElementById('copiedBtn');
        const inputContainer = document.getElementById('inputContainer');
        const verifyBtn = document.getElementById('verifyBtn');
        const statusMessage = document.getElementById('statusMessage');
        const restartBtn = document.getElementById('restartBtn');
        const hintText = document.getElementById('hintText');

        // 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞
        generateBtn.addEventListener('click', () => {
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–π —á–∞—Å—Ç–∏ (40 —Ü–∏—Ñ—Ä)
            let randomPart = '';
            for (let i = 0; i < 40; i++) {
                randomPart += Math.floor(Math.random() * 10);
            }
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏ (10 —Ü–∏—Ñ—Ä: –î–î–ú–ú–ì–ì–ß–ß–ú–ú)
            const now = new Date();

            const dateTimePart = 
                String(now.getMonth() + 1).padStart(2, '0') +  // –º–µ—Å—è—Ü (12)
                String(now.getDate()).padStart(2, '0') +       // –¥–µ–Ω—å (31)
                String(now.getHours()).padStart(2, '0') +      // —á–∞—Å (23)
                String(now.getMinutes()).padStart(2, '0') +    // –º–∏–Ω—É—Ç–∞ (59)
                String(now.getSeconds()).padStart(2, '0');     // —Å–µ–∫—É–Ω–¥–∞ (59)
            
            currentCode = randomPart + dateTimePart; // 50 —Ü–∏—Ñ—Ä
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–¥
            codeDisplay.textContent = formatCode(currentCode);
            step1.classList.add('hidden');
            step2.classList.remove('hidden');
        });

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —á—Ç–µ–Ω–∏—è
        function formatCode(code) {
            return code.match(/.{1,5}/g).join(' ');
        }

        // 2. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
        copiedBtn.addEventListener('click', () => {
            step2.classList.add('hidden');
            initVerificationStep();
            step3.classList.remove('hidden');
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —à–∞–≥–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
        function initVerificationStep() {
            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø–æ–ª—è
            inputContainer.innerHTML = '';
            userInputs = [];
            positionsToCheck = [];
            
            // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
            const allPositions = Array.from({length: CODE_LENGTH}, (_, i) => i);
            for (let i = 0; i < CHECK_DIGITS; i++) {
                const randomIndex = Math.floor(Math.random() * allPositions.length);
                positionsToCheck.push(allPositions.splice(randomIndex, 1)[0]);
            }
            positionsToCheck.sort((a, b) => a - b);
            
            // –°–æ–∑–¥–∞–µ–º 50 –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
            for (let i = 0; i < CODE_LENGTH; i++) {
                const input = document.createElement('input');
                input.type = 'text';
                input.maxLength = 1;
                input.inputMode = 'numeric';
                input.pattern = '[0-9]*';
                input.className = 'digit-input';
                
                if (positionsToCheck.includes(i)) {
                    input.classList.add('blink');
                    input.dataset.position = i;
                    input.placeholder = '?';
                } else {
                    input.disabled = true;
                    input.placeholder = '-';
                }
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–≤–æ–¥–∞
                input.addEventListener('input', (e) => {
                    const value = e.target.value.replace(/[^0-9]/g, '');
                    e.target.value = value;
                    
                    if (value && e.target.nextElementSibling && e.target.nextElementSibling.classList.contains('blink')) {
                        e.target.nextElementSibling.focus();
                    }
                    
                    updateVerifyButton();
                });
                
                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Backspace' && !e.target.value && e.target.previousElementSibling) {
                        e.target.previousElementSibling.focus();
                    }
                });
                
                inputContainer.appendChild(input);
                userInputs.push(input);
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É
            hintText.textContent = `–í–≤–µ–¥–∏—Ç–µ —Ü–∏—Ñ—Ä—ã –Ω–∞ –ø–æ–∑–∏—Ü–∏—è—Ö: ${positionsToCheck.map(p => p + 1).join(', ')}`;
            
            // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–º –º–∏–≥–∞—é—â–µ–º –ø–æ–ª–µ
            const firstBlink = inputContainer.querySelector('.blink');
            if (firstBlink) firstBlink.focus();
        }

        // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
        function updateVerifyButton() {
            const allFilled = positionsToCheck.every(pos => {
                return userInputs[pos].value.trim() !== '';
            });
            verifyBtn.disabled = !allFilled;
        }

        // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–≤–æ–¥–∞
        verifyBtn.addEventListener('click', () => {
            let allCorrect = true;
            
            positionsToCheck.forEach(pos => {
                const input = userInputs[pos];
                if (input.value === currentCode[pos]) {
                    input.style.borderColor = '#6eff8f';
                    input.style.background = 'rgba(110, 255, 143, 0.1)';
                } else {
                    input.style.borderColor = '#ff6464';
                    input.style.background = 'rgba(255, 100, 100, 0.1)';
                    allCorrect = false;
                }
            });
            
            if (allCorrect) {
                // –£—Å–ø–µ—Ö
                step3.classList.add('hidden');
                statusMessage.innerHTML = '<div class="success">‚úì</div><div style="margin-top:10px;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</div>';
                statusMessage.innerHTML += '<div style="margin-top:20px; color:#a0e0ff; font-size:0.9rem;">–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –±—É–º–∞–≥—É —Å –∫–æ–¥–æ–º –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ.</div>';
                step4.classList.remove('hidden');
            } else {
                // –û—à–∏–±–∫–∞
                hintText.innerHTML = '<span style="color:#ff6464">–ù–∞–π–¥–µ–Ω—ã –æ—à–∏–±–∫–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±—É–º–∞–≥—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.</span>';
                verifyBtn.textContent = '–ü–û–í–¢–û–†–ò–¢–¨ –ü–†–û–í–ï–†–ö–£';
                
                // –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É
                setTimeout(() => {
                    step3.classList.add('hidden');
                    step2.classList.remove('hidden');
                    codeDisplay.textContent = formatCode(currentCode);
                }, 3000);
            }
        });

        // 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
        restartBtn.addEventListener('click', () => {
            // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
            currentCode = '';
            positionsToCheck = [];
            userInputs = [];
            
            // –°–±—Ä–æ—Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            step4.classList.add('hidden');
            step1.classList.remove('hidden');
            
            // –°–±—Ä–æ—Å –∫–Ω–æ–ø–∫–∏
            verifyBtn.textContent = '–ü–†–û–í–ï–†–ò–¢–¨ –í–í–û–î';
            verifyBtn.disabled = true;
            
            // –°–±—Ä–æ—Å –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
            document.querySelectorAll('.digit-input').forEach(input => {
                input.value = '';
                input.style.borderColor = '';
                input.style.background = '';
            });
        });
    </script>
</body>
</html>
