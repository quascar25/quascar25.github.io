<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Космическая Рулетка</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #000;
            color: #0af;
            font-family: 'Courier New', monospace;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 10px;
        }
        #starfield {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        .container {
            width: 100%;
            max-width: 400px;
            height: 90vh;
            max-height: 710px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            position: relative;
        }
        .stats-panel {
            background: rgba(0, 10, 30, 0.9);
            border: 2px solid #0af;
            padding: 5px;
            height: 60px;
            clip-path: polygon(5% 0, 95% 0, 100% 100%, 0 100%);
            box-shadow: 0 0 10px #0088ff;
        }
        .stats-title {
            color: #00f7ff;
            font-size: 0.9em;
            text-align: center;
            margin-bottom: 3px;
            text-shadow: 0 0 4px #00f7ff;
        }
        #statsGrid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 3px;
            font-size: 0.7em;
        }
        .stat-number {
            padding: 3px 1px;
            background: rgba(0, 30, 60, 0.7);
            border: 1px solid #0af;
            color: #fff;
            font-weight: bold;
            clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
            text-align: center;
            min-width: 0;
            overflow: hidden;
        }
        .red { color: #ff3366; }
        .black { color: #00f7ff; }
        .green { color: #33ff66; }
        .roulette-table {
            background: rgba(0, 20, 40, 0.85);
            border: 3px solid #0af;
            padding: 10px;
            flex-grow: 1;
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 4px;
            clip-path: polygon(3% 0, 97% 0, 100% 5%, 100% 95%, 97% 100%, 3% 100%, 0 95%, 0 5%);
            box-shadow: 0 0 15px #0088ff;
        }
        .table-cell {
            background: rgba(0, 30, 60, 0.7);
            border: 1px solid #0af;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s;
            clip-path: polygon(20% 0%, 80% 0%, 100% 20%, 100% 80%, 80% 100%, 20% 100%, 0% 80%, 0% 20%);
        }
        .table-cell:hover {
            background: rgba(0, 50, 100, 0.9);
            box-shadow: 0 0 8px #0af;
        }
        .table-cell.zero {
            grid-column: 1 / 3;
            grid-row: 1 / 5;
            font-size: 1.5em;
            background: rgba(0, 80, 0, 0.7);
        }
        .table-cell.red { color: #ff3366; }
        .table-cell.black { color: #00f7ff; }
        .wheel-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto;
        }
        #wheelCanvas {
            background: radial-gradient(circle at center, #001122, #000);
            border-radius: 50%;
            border: 5px solid #0af;
            box-shadow: 0 0 20px #0088ff, inset 0 0 20px #001133;
            cursor: pointer;
            width: 100%;
            height: 100%;
        }
        #vader {
            position: absolute;
            width: 30px;
            height: 50px;
            transition: all 1s cubic-bezier(0.34, 1.56, 0.64, 1);
            pointer-events: none;
            z-index: 10;
            filter: drop-shadow(0 0 5px red);
            display: none;
        }
        .vader-body {
            position: absolute;
            width: 24px;
            height: 36px;
            background: #111;
            clip-path: polygon(20% 0, 80% 0, 100% 20%, 100% 100%, 0 100%, 0 20%);
            left: 3px;
            top: 0;
        }
        .vader-head {
            position: absolute;
            width: 30px;
            height: 15px;
            background: #000;
            clip-path: polygon(20% 0, 80% 0, 100% 100%, 0 100%);
            top: -12px;
        }
        .vader-eyes {
            position: absolute;
            width: 100%;
            height: 6px;
            top: 5px;
            display: flex;
            justify-content: space-around;
        }
        .eye {
            width: 5px;
            height: 5px;
            background: #ff0033;
            border-radius: 50%;
            animation: eyeGlow 0.6s infinite alternate;
            box-shadow: 0 0 8px red;
        }
        @keyframes eyeGlow {
            0% { opacity: 0.3; }
            100% { opacity: 1; }
        }
        .control-panel {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 5px;
        }
        .bets-row {
            display: flex;
            justify-content: center;
            gap: 5px;
            flex-wrap: wrap;
        }
        .bet-btn {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #001122, #003355);
            border: 2px solid #0af;
            color: #00f7ff;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            clip-path: polygon(25% 0, 75% 0, 100% 50%, 75% 100%, 25% 100%, 0 50%);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        .bet-btn.active {
            background: linear-gradient(135deg, #005588, #00aaff);
            box-shadow: 0 0 10px #00f7ff;
            color: white;
        }
        .info-panel {
            background: rgba(0, 20, 40, 0.85);
            border: 2px solid #0af;
            padding: 8px;
            text-align: center;
            clip-path: polygon(10% 0, 90% 0, 100% 30%, 100% 100%, 0 100%, 0 30%);
            font-size: 0.9em;
        }
        #currentBet, #lastNumber {
            color: #00f7ff;
            text-shadow: 0 0 5px #00f7ff;
            margin: 3px 0;
            min-height: 1.2em;
        }
        #message {
            color: #ff3366;
            text-shadow: 0 0 5px #ff3366;
            font-size: 0.9em;
            min-height: 1.2em;
            animation: flicker 1.5s infinite;
        }
        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body>
    <canvas id="starfield"></canvas>
    <div class="container">
        <div class="stats-panel">
            <div class="stats-title">ПОСЛЕДНИЕ ЧИСЛА</div>
            <div id="statsGrid"></div>
        </div>
        
        <div class="roulette-table" id="rouletteTable">
            <!-- Таблица будет сгенерирована скриптом -->
        </div>
        
        <div class="wheel-container">
            <canvas id="wheelCanvas" width="200" height="200"></canvas>
            <div id="vader">
                <div class="vader-head"></div>
                <div class="vader-body"></div>
                <div class="vader-eyes">
                    <div class="eye"></div>
                    <div class="eye"></div>
                </div>
            </div>
        </div>
        
        <div class="control-panel">
            <div class="bets-row">
                <div class="bet-btn" data-bet="1">1</div>
                <div class="bet-btn" data-bet="2">2</div>
                <div class="bet-btn" data-bet="3">3</div>
                <div class="bet-btn" data-bet="4">4</div>
                <div class="bet-btn" data-bet="5">5</div>
                <div class="bet-btn" data-bet="6">6</div>
                <div class="bet-btn" data-bet="7">7</div>
                <div class="bet-btn" data-bet="8">8</div>
                <div class="bet-btn" data-bet="9">9</div>
                <div class="bet-btn" data-bet="10">10</div>
            </div>
            
            <div class="info-panel">
                <div>СТАВКА: <span id="currentBet">1</span></div>
                <div>РЕЗУЛЬТАТ: <span id="lastNumber">–</span></div>
                <div id="message">ВЫБЕРИ СТАВКУ И КЛИКНИ НА РУЛЕТКУ</div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('wheelCanvas');
        const ctx = canvas.getContext('2d');
        const starfield = document.getElementById('starfield');
        const statsGrid = document.getElementById('statsGrid');
        const rouletteTable = document.getElementById('rouletteTable');
        const currentBetEl = document.getElementById('currentBet');
        const lastNumberEl = document.getElementById('lastNumber');
        const messageEl = document.getElementById('message');
        const vader = document.getElementById('vader');
        const betButtons = document.querySelectorAll('.bet-btn');

        let currentBet = 1;
        let lastNumbers = [];
        let isSpinning = false;
        let wheelAngle = 0;
        let targetAngle = 0;
        let spinAnimationId = null;
        let resultNumber = null;

        const colors = {};
        for (let i = 1; i <= 36; i++) {
            colors[i] = (i % 2 === 0) ? 'red' : 'black';
        }
        colors[0] = 'green';

        function initStarfield() {
            starfield.width = window.innerWidth;
            starfield.height = window.innerHeight;
            const starCtx = starfield.getContext('2d');
            const stars = [];
            for (let i = 0; i < 150; i++) {
                stars.push({
                    x: Math.random() * starfield.width,
                    y: Math.random() * starfield.height,
                    size: Math.random() * 1.2,
                    brightness: Math.random()
                });
            }
            function drawStars() {
                starCtx.fillStyle = 'black';
                starCtx.fillRect(0, 0, starfield.width, starfield.height);
                stars.forEach(star => {
                    starCtx.beginPath();
                    starCtx.fillStyle = `rgba(255, 255, 255, ${star.brightness})`;
                    starCtx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                    starCtx.fill();
                    star.brightness = 0.2 + Math.abs(Math.sin(Date.now() / 1200 + star.x)) * 0.8;
                });
                requestAnimationFrame(drawStars);
            }
            drawStars();
        }

        function createTable() {
            const numbers = [
                [3, 6, 9, 12, 15, 18, 21, 24, 27, 30, 33, 36],
                [2, 5, 8, 11, 14, 17, 20, 23, 26, 29, 32, 35],
                [1, 4, 7, 10, 13, 16, 19, 22, 25, 28, 31, 34]
            ];
            
            const zeroCell = document.createElement('div');
            zeroCell.className = 'table-cell zero green';
            zeroCell.textContent = '0';
            zeroCell.dataset.number = '0';
            rouletteTable.appendChild(zeroCell);
            
            for (let row = 0; row < 3; row++) {
                for (let col = 0; col < 12; col++) {
                    const num = numbers[row][col];
                    const cell = document.createElement('div');
                    cell.className = `table-cell ${colors[num]}`;
                    cell.textContent = num;
                    cell.dataset.number = num;
                    cell.style.gridColumn = col + 3;
                    cell.style.gridRow = row + 2;
                    rouletteTable.appendChild(cell);
                    
                    cell.addEventListener('click', () => {
                        if (isSpinning) return;
                        messageEl.textContent = `СТАВКА НА ЧИСЛО ${num}`;
                    });
                }
            }
        }

        function drawWheel(angle = 0) {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 90;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            ctx.save();
            ctx.translate(centerX, centerY);
            ctx.rotate(angle);

            const totalNumbers = 37;
            const sliceAngle = (2 * Math.PI) / totalNumbers;
            
            for (let i = 0; i < totalNumbers; i++) {
                const num = i;
                const startAngle = i * sliceAngle;
                const endAngle = startAngle + sliceAngle;
                
                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.arc(0, 0, radius, startAngle, endAngle);
                ctx.closePath();
                
                ctx.fillStyle = colors[num] === 'red' ? '#440000' : 
                               colors[num] === 'black' ? '#001122' : '#004400';
                ctx.fill();
                
                ctx.strokeStyle = '#0af';
                ctx.lineWidth = 1;
                ctx.stroke();

                ctx.save();
                ctx.rotate(startAngle + sliceAngle / 2);
                ctx.translate(radius * 0.7, 0);
                ctx.rotate(Math.PI / 2);
                
                ctx.fillStyle = colors[num] === 'red' ? '#ff3366' : 
                               colors[num] === 'black' ? '#00f7ff' : '#33ff66';
                ctx.font = 'bold 12px Courier New';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(num.toString(), 0, 0);
                ctx.restore();
            }

            ctx.restore();

            ctx.beginPath();
            ctx.arc(centerX, centerY, 5, 0, Math.PI * 2);
            ctx.fillStyle = '#0af';
            ctx.fill();
            
            ctx.beginPath();
            ctx.moveTo(centerX, centerY - 10);
            ctx.lineTo(centerX, centerY - radius + 10);
            ctx.lineTo(centerX + 8, centerY - radius + 20);
            ctx.lineTo(centerX - 8, centerY - radius + 20);
            ctx.closePath();
            ctx.fillStyle = '#ff3300';
            ctx.fill();
        }

        function updateStats() {
            statsGrid.innerHTML = '';
            lastNumbers.slice(-30).forEach(num => {
                const div = document.createElement('div');
                div.className = `stat-number ${colors[num]}`;
                div.textContent = num;
                statsGrid.appendChild(div);
            });
        }

        function placeVader(number) {
            if (number === null) {
                vader.style.display = 'none';
                return;
            }
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 90;
            const totalNumbers = 37;
            const sliceAngle = (2 * Math.PI) / totalNumbers;
            const index = number;
            const angle = index * sliceAngle + sliceAngle / 2 - wheelAngle;
            const x = centerX + Math.cos(angle) * radius * 0.85;
            const y = centerY + Math.sin(angle) * radius * 0.85;
            vader.style.left = (x - 15) + 'px';
            vader.style.top = (y - 25) + 'px';
            vader.style.display = 'block';
        }

        function spinWheel() {
            if (isSpinning) return;
            isSpinning = true;
            vader.style.display = 'none';
            messageEl.textContent = 'ВРАЩЕНИЕ...';

            resultNumber = Math.floor(Math.random() * 37);
            const totalNumbers = 37;
            const sliceAngle = (2 * Math.PI) / totalNumbers;
            targetAngle = wheelAngle + 8 * Math.PI + (resultNumber * sliceAngle + sliceAngle / 2);

            function animate() {
                const diff = targetAngle - wheelAngle;
                if (Math.abs(diff) < 0.01) {
                    wheelAngle = targetAngle;
                    drawWheel(wheelAngle);
                    finishSpin();
                    return;
                }
                wheelAngle += diff * 0.04;
                drawWheel(wheelAngle);
                spinAnimationId = requestAnimationFrame(animate);
            }
            animate();
        }

        function finishSpin() {
            isSpinning = false;
            lastNumbers.push(resultNumber);
            if (lastNumbers.length > 30) lastNumbers.shift();
            updateStats();
            lastNumberEl.textContent = resultNumber;
            lastNumberEl.className = colors[resultNumber];
            messageEl.textContent = `ВЫПАЛО: ${resultNumber} | СТАВКА: ${currentBet}`;
            placeVader(resultNumber);
        }

        function init() {
            initStarfield();
            createTable();
            drawWheel();
            updateStats();
            
            betButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    if (isSpinning) return;
                    betButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentBet = parseInt(btn.dataset.bet);
                    currentBetEl.textContent = currentBet;
                    vader.style.display = 'none';
                    messageEl.textContent = `СТАВКА: ${currentBet} | КЛИКНИ НА РУЛЕТКУ`;
                });
            });
            betButtons[0].classList.add('active');
            
            canvas.addEventListener('click', () => {
                if (isSpinning) return;
                spinWheel();
            });
            
            window.addEventListener('resize', initStarfield);
        }

        init();
    </script>
</body>
</html>
